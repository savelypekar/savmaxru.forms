{"version":3,"file":"componentsgallery.bundle.js","sources":["../src/componentsgallery.js"],"sourcesContent":["import {ObjectsGallery} from \"savmaxru.objectsgallery\";\nimport {GUIComponents} from 'savmaxru.guicomponents';\nimport {ModalWindow} from 'savmaxru.modalwindow';\nimport {Tag} from 'main.core';\nimport './css/style.css'\n\nexport class ComponentsGallery extends ObjectsGallery\n{\n\tconstructor(argument, parent,IDManager)\n\t{\n\t\targument[\"objectsFactory\"] = GUIComponents;\n\t\tsuper(argument);\n\t\tthis.IDManager = IDManager;\n\t\tthis.componentEditor = argument['componentEditor'];\n\t\tthis.setParent(parent);\n\t}\n\n\teditComponent(component)\n\t{\n\t\tthis.componentEditor.runEditor(component);\n\t}\n\n\tsaveButton = Tag.render`<div></div>`;\n\tgetSaveButton()\n\t{\n\t\treturn this.saveButton;\n\t}\n\n\taddQuestions(question ={},regime)\n\t{\n\t\tlet gallery = this;\n\t\tlet type = question['type'];\n\t\tquestion['IDManager'] = this.IDManager;\n\t\tlet component = this.createFactoryObject(type);\n\t\tcomponent.build(question);\n\t\tif(type === 'Button')\n\t\t{\n\t\t\tthis.saveButton.append(component.getHTMLObject());\n\t\t}\n\t\tif(type === 'Button' && regime === 'view')\n\t\t{\n\t\t\tcomponent.onDown(function(){\n\t\t\t\tgallery.getParent().saveResult(gallery.getResult());\n\t\t\t\tgallery.removeHTMLObject();\n\t\t\t\tlet successDialog = new ModalWindow();\n\t\t\t\tsuccessDialog.setContent(\n\t\t\t\t\tTag.render`<div class=\"success\">\n\t\t\t\t\t\t<div class=\"success-ico\"></div>\n\t\t\t\t\t\t<span>${BX.message('FORM_SEND_SUCCESSFULLY')}</span>\n\t\t\t\t\t</div>`\n\t\t\t\t);\n\t\t\t\tgallery.getParent().getHTMLObject().append(successDialog.getHTMLObject());\n\t\t\t});\n\t\t}\n\t\tcomponent.enableEditMode(this.editMode);\n\t}\n\n\teditMode = [];\n\n\tenableEditMode(modes= {\n\t\t\"settings\":true,\"remove\":true\n\t})\n\t{\n\t\tthis.editMode = modes;\n\t}\n\n\taddObjectsGroup(data,regime)\n\t{\n\t\tlet questions = data['questions'];\n\n\t\tfor(let i=0; i<questions.length; i++)\n\t\t{\n\t\t\tthis.addQuestions(questions[i],regime);\n\t\t}\n\t}\n\n\tcreateComponent(type)\n\t{\n\t\tlet object = this.createFactoryObject(type);\n\t\tobject.build(\n\t\t{\n\t\t\t'type':type,\n\t\t\t'IDManager': this.IDManager,\n\t\t});\n\t\tobject.enableEditMode(this.editMode);\n\t\treturn object;\n\t}\n\n\tcreateComponentWithOption(type,value = '')\n\t{\n\t\tlet component = this.createComponent(type);\n\t\tcomponent.build(\n\t\t{\n\t\t\t'options': [\n\t\t\t\t{\n\t\t\t\t\tvalue: value,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\treturn component;\n\t}\n\n\tgetResult()\n\t{\n\t\tlet resultGallery=[];\n\t\tlet argumentsForResult = this.argumentsForResult;\n\t\tfor (let key in argumentsForResult)\n\t\t{\n\t\t\tresultGallery[key]= argumentsForResult[key];\n\t\t}\n\t\tlet questions=[];\n\t\tlet objects = this.objects;\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\t\t\tlet objectResult = object.getResult();\n\t\t\tif(objectResult !== false)\n\t\t\t{\n\t\t\t\tquestions.push(objectResult);\n\t\t\t}\n\t\t}\n\t\tresultGallery[\"questions\"] = questions;\n\t\treturn resultGallery;\n\t}\n\n\tgetChanges()\n\t{\n\t\tlet changesGallery=[];\n\t\tlet argumentsForResult = this.argumentsForResult;\n\t\tfor (let key in argumentsForResult)\n\t\t{\n\t\t\tchangesGallery[key]= argumentsForResult[key];\n\t\t}\n\t\tlet questions=[];\n\t\tlet objects = this.objects;\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\t\t\tlet objectResult = object.getChanges();\n\t\t\tif(objectResult !== false)\n\t\t\t{\n\t\t\t\tquestions.push(objectResult);\n\t\t\t}\n\t\t}\n\t\tif(questions.length !== 0)\n\t\t{\n\t\t\tchangesGallery[\"questions\"] = questions;\n\t\t}\n\t\treturn changesGallery;\n\t}\n\n}"],"names":["ComponentsGallery","argument","parent","IDManager","GUIComponents","Tag","render","componentEditor","setParent","component","runEditor","saveButton","question","regime","gallery","type","createFactoryObject","build","append","getHTMLObject","onDown","getParent","saveResult","getResult","removeHTMLObject","successDialog","ModalWindow","setContent","BX","message","enableEditMode","editMode","modes","data","questions","i","length","addQuestions","object","value","createComponent","resultGallery","argumentsForResult","key","objects","objectResult","push","changesGallery","getChanges","ObjectsGallery"],"mappings":"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"}