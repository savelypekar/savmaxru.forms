{"version":3,"file":"componentsgallery.bundle.js","sources":["../src/componentsgallery.js"],"sourcesContent":["import {ObjectsGallery} from \"savmaxru.objectsgallery\";\nimport {GUIComponents} from 'savmaxru.guicomponents';\nimport {ModalWindow} from 'savmaxru.modalwindow';\nimport {Tag} from 'main.core';\nimport './css/style.css'\n\nexport class ComponentsGallery extends ObjectsGallery\n{\n\tconstructor(argument, parent,IDManager)\n\t{\n\t\targument[\"objectsFactory\"] = GUIComponents;\n\t\tsuper(argument);\n\t\tthis.IDManager = IDManager;\n\t\tthis.componentEditor = argument['componentEditor'];\n\t\tthis.setParent(parent);\n\t}\n\n\teditComponent(component)\n\t{\n\t\tthis.componentEditor.runEditor(component);\n\t}\n\n\taddQuestions(question ={},regime)\n\t{\n\t\tlet gallery = this;\n\t\tlet type = question['type'];\n\t\tquestion['IDManager'] = this.IDManager;\n\t\tlet component = this.createFactoryObject(type);\n\t\tcomponent.build(question);\n\t\tif(type === 'Button' && regime === 'view')\n\t\t{\n\t\t\tcomponent.onDown(function(){\n\t\t\t\tgallery.getParent().saveResult(gallery.getResult());\n\t\t\t\tgallery.removeHTMLObject();\n\t\t\t\tlet successDialog = new ModalWindow();\n\t\t\t\tsuccessDialog.setContent(\n\t\t\t\t\tTag.render`<div class=\"success\">\n\t\t\t\t\t\t<div class=\"success-ico\"></div>\n\t\t\t\t\t\t<span>${BX.message('FORM_SEND_SUCCESSFULLY')}</span>\n\t\t\t\t\t</div>`\n\t\t\t\t);\n\t\t\t\tgallery.getParent().getHTMLObject().append(successDialog.getHTMLObject());\n\t\t\t});\n\t\t}\n\t\tcomponent.enableEditMode(this.editMode);\n\t}\n\n\teditMode = [];\n\n\tenableEditMode(modes= {\n\t\t\"settings\":true,\"remove\":true\n\t})\n\t{\n\t\tthis.editMode = modes;\n\t}\n\n\taddObjectsGroup(data,regime)\n\t{\n\t\tlet questions = data['questions'];\n\n\t\tfor(let i=0; i<questions.length; i++)\n\t\t{\n\t\t\tthis.addQuestions(questions[i],regime);\n\t\t}\n\t}\n\n\tcreateComponent(type)\n\t{\n\t\tlet object = this.createFactoryObject(type);\n\t\tobject.build(\n\t\t{\n\t\t\t'type':type,\n\t\t\t'IDManager': this.IDManager,\n\t\t});\n\t\tobject.enableEditMode(this.editMode);\n\t\treturn object;\n\t}\n\n\tcreateComponentWithOption(type)\n\t{\n\t\tlet component = this.createComponent(type);\n\t\tcomponent.build(\n\t\t{\n\t\t\t'options': [\n\t\t\t\t{\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\treturn component;\n\t}\n\n\tgetResult()\n\t{\n\t\tlet resultGallery=[];\n\t\tlet argumentsForResult = this.argumentsForResult;\n\t\tfor (let key in argumentsForResult)\n\t\t{\n\t\t\tresultGallery[key]= argumentsForResult[key];\n\t\t}\n\t\tlet questions=[];\n\t\tlet objects = this.objects;\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\t\t\tlet objectResult = object.getResult();\n\t\t\tif(objectResult !== false)\n\t\t\t{\n\t\t\t\tquestions.push(objectResult);\n\t\t\t}\n\t\t}\n\t\tresultGallery[\"questions\"] = questions;\n\t\treturn resultGallery;\n\t}\n\n\tgetChanges()\n\t{\n\t\tlet changesGallery=[];\n\t\tlet argumentsForResult = this.argumentsForResult;\n\t\tfor (let key in argumentsForResult)\n\t\t{\n\t\t\tchangesGallery[key]= argumentsForResult[key];\n\t\t}\n\t\tlet questions=[];\n\t\tlet objects = this.objects;\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\t\t\tlet objectResult = object.getChanges();\n\t\t\tif(objectResult !== false)\n\t\t\t{\n\t\t\t\tquestions.push(objectResult);\n\t\t\t}\n\t\t}\n\t\tif(questions.length !== 0)\n\t\t{\n\t\t\tchangesGallery[\"questions\"] = questions;\n\t\t}\n\t\treturn changesGallery;\n\t}\n\n}"],"names":["ComponentsGallery","argument","parent","IDManager","GUIComponents","componentEditor","setParent","component","runEditor","question","regime","gallery","type","createFactoryObject","build","onDown","getParent","saveResult","getResult","removeHTMLObject","successDialog","ModalWindow","setContent","Tag","render","BX","message","getHTMLObject","append","enableEditMode","editMode","modes","data","questions","i","length","addQuestions","object","createComponent","value","resultGallery","argumentsForResult","key","objects","objectResult","push","changesGallery","getChanges","ObjectsGallery"],"mappings":"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"}