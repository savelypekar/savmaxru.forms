{"version":3,"file":"componenteditor.bundle.js","sources":["../src/typebutton.js","../src/componenteditor.js"],"sourcesContent":["import {Tag} from 'main.core';\nimport {ObjectGUI} from 'savmaxru.objectgui';\n\nexport class TypeButton extends ObjectGUI\n{\n\ttypesDescription = {\n\t\t\"DropDownList\": \"DROPDOWN_LIST\",\n\t\t\"CheckboxList\": \"CHECKBOX_LIST\",\n\t\t\"RadiobuttonList\" : \"RADIOBUTTON_LIST\",\n\t\t\"Heading\" : \"HEADING\",\n\t\t\"SingleLineTextBox\" : \"SINGLELINE_TEXTBOX\",\n\t\t\"MultiLineTextBox\" : \"MULTILINE_TEXTBOX\",\n\t};\n\n\ttypesIcon = {\n\t\t\"DropDownList\": \"dropdownlist-ico\",\n\t\t\"CheckboxList\": \"checkboxlist-ico\",\n\t\t\"RadiobuttonList\" : \"radiobuttonlist-ico\",\n\t\t\"Heading\" : \"heading-ico\",\n\t\t\"SingleLineTextBox\" : \"singlelinetextbox-ico\",\n\t\t\"MultiLineTextBox\" : \"multilinetextbox-ico\",\n\t};\n\n\tconstructor(type, parent)\n\t{\n\t\tsuper();\n\t\tthis.setRootNode(\n\t\t\tTag.render`\n\t\t\t<div class=\"btn-type-ico\">\n\t\t\t\t<div class=\"${this.typesIcon[type]}\"></div>\n\t\t\t\t<span>${BX.message(this.typesDescription[type])}</span>\n\t\t\t</div>`\n\t\t);\n\t\t(this.getHTMLObject()).onclick = function() {\n\t\t\tparent.addComponent(type);\n\t\t};\n\t}\n}\n\n//alert(BX.message(\"VENDOR_MODULENAME_COMPONENTNAME_BOOK_TITLE_1\"));\n//alert(BX.message(\"UI_BUTTONS_SAVE_BTN_TEXT\"));\n//alert(3);","import {Type} from 'main.core';\nimport {ModalWindow} from 'savmaxru.modalwindow';\nimport {Tag} from 'main.core';\nimport './css/style.css'\nimport {TypeButton} from \"./typebutton\";\nimport {ComponentsGallery} from \"savmaxru.componentsgallery\";\nimport {IDManager} from 'savmaxru.idmanager';\n\nexport class ComponentEditor\n{\n\tIDManager = new IDManager('editor');\n\n\ttypes = [\n\t\t\"DropDownList\",\"CheckboxList\",\"RadiobuttonList\", \"Heading\" , \"SingleLineTextBox\", \"MultiLineTextBox\",\n\t];\n\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tsetGallery(objectsGallery)\n\t{\n\t\tthis.objectsGallery = objectsGallery;\n\t}\n\n\topenWindow()\n\t{\n\t\tthis.window = new Savmaxru.ModalWindow();\n\t\tthis.parent.append(this.window.getHTMLObject());\n\t}\n\n\trunCreator()\n\t{\n\t\tthis.openWindow();\n\t\tlet selectingAComponent = Tag.render`<div class=\"components-selection\"></div>`;\n\n\t\tfor(let i=0; i<this.types.length; i++)\n\t\t{\n\t\t\tlet button = new TypeButton(this.types[i],this);\n\t\t\tselectingAComponent.append(button.getHTMLObject());\n\t\t}\n\t\tthis.window.setContent(selectingAComponent);\n\t\tthis.selectingAComponentMenu = selectingAComponent;\n\t}\n\n\tbuildFieldStructureForEditingOption(optionStructure)\n\t{\n\t\tlet option = {\n\t\t\tindex: optionStructure[\"index\"],\n\t\t\tID: optionStructure[\"ID\"],\n\t\t\ttype: \"SingleLineTextBox\",\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tvalue: optionStructure[\"value\"],\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t\treturn option;\n\t}\n\n\tapplyChanges(component,description,optionsGallery,otherSettings)\n\t{\n\t\tlet objects = optionsGallery.getObjects();\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\n\t\t\tlet newValue = object.getHTMLValue();\n\t\t\tlet modifiableOption = object.getProperty('modifiableOption');\n\n\t\t\tif(modifiableOption !== undefined)\n\t\t\t{\n\t\t\t\tlet savedValue = modifiableOption.getProperty('value');\n\t\t\t\tif(object.getProperty('change') === 'removed')\n\t\t\t\t{\n\t\t\t\t\tmodifiableOption.remove();\n\t\t\t\t}\n\t\t\t\telse if(newValue !== savedValue)\n\t\t\t\t{\n\t\t\t\t\tmodifiableOption.rewriteProperty('value', newValue);\n\t\t\t\t\tmodifiableOption.refreshHTML();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(object.getProperty('change') !== 'removed')\n\t\t\t{\n\t\t\t\t//если был создана новая опция и не была удалена при том\n\t\t\t\tcomponent.addOptions([{\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t}]);\n\t\t\t}\n\n\t\t}\n\n\t\t//options.getValue();\n\t}\n\n\trunEditor(component,runWindow = true)\n\t{\n\t\tif(runWindow)\n\t\t{\n\t\t\tthis.openWindow();\n\t\t}\n\t\tlet componentStructure = component.getStructure();\n\n\t\tlet configDescription = {\n\t\t\t\"galleryClassCSS\": \"editor-description-gallery\",\n\t\t};\n\t\tlet description = new ComponentsGallery(configDescription);\n\t\tthis.window.setContent(description.getHTMLObject());\n\n\t\tlet configOption = {\n\t\t\t\"galleryClassCSS\": \"editor-options-gallery\",\n\t\t};\n\t\tlet options = new ComponentsGallery(configOption);\n\t\tthis.window.setContent(options.getHTMLObject());\n\t\toptions.enableEditMode({\n\t\t\t\"remove\":true\n\t\t});\n\n\t\tlet configOtherSettings = {\n\t\t\t\"galleryClassCSS\": \"editor-other-settings-gallery\",\n\t\t};\n\t\tlet otherSettings = new ComponentsGallery(configOtherSettings);\n\t\tthis.window.setContent(otherSettings.getHTMLObject());\n\n\t\tlet type = componentStructure[\"type\"];\n\n\t\tlet titles = {\n\t\t\t\"Heading\" :BX.message(\"HEADER_EDITING_TITLE\"),\n\t\t\t\"RadiobuttonList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"CheckboxList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"MultiLineTextBox\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"SingleLineTextBox\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"DropDownList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"Button\" : BX.message(\"BUTTON_EDITING_TITLE\"),\n\t\t}\n\n\t\tdescription.addObjectsGroup({\n\n\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\ttype: \"Heading\",\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue:titles[type],\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t}\n\t\t\t],\n\t\t});\n\n\t\tif(type !== \"Button\" && type !== \"Heading\")\n\t\t{\n\t\t\tdescription.addObjectsGroup({\n\t\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\t\tID: \"questionText\",\n\t\t\t\t\tdescription:BX.message(\"QUESTION_TEXT\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t},{\n\t\t\t\t\tID: \"hintToTheQuestion\",\n\t\t\t\t\tdescription:BX.message(\"HINT_TO_THE_QUESTION\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t},],\n\t\t\t},);\n\n\t\t\tif(type === \"CheckboxList\" || type === \"RadiobuttonList\" || type === \"DropDownList\")\n\t\t\t{\n\t\t\t\tdescription.addObjectsGroup({\n\t\t\t\t\tquestions: [{\n\t\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\t\tcomment: BX.message(\"ANSWER_OPTIONS_COMMENT\"),\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue:BX.message(\"ANSWER_OPTIONS\"),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/*let questions = [];\n\t\tfor(let i=0; i<componentStructure['options'].length; i++)\n\t\t{\n\t\t\tquestions.push(this.buildFieldStructureForEditingOption(componentStructure['options'][i]));\n\t\t}\n\n\t\toptions.addObjectsGroup({\n\t\t\tquestions,\n\t\t},);*/\n\t\tlet optionsStructure = component.getOptions();\n\n\t\tfor(let i=0; i<optionsStructure.length; i++)\n\t\t{\n\n\t\t\tif(optionsStructure[i].getProperty('change') !== 'removed')\n\t\t\t{\n\t\t\t\tlet option = options.createComponent(\"SingleLineTextBox\");\n\t\t\t\toption.addProperty('modifiableOption',optionsStructure[i]);\n\t\t\t\toption.build(\n\t\t\t\t{\n\t\t\t\t\t'options': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: optionsStructure[i].getProperty('value'),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif(type !== \"Button\" && type !== \"Heading\")\n\t\t{\n\t\t\tif(type !== \"SingleLineTextBox\" && type !== \"MultiLineTextBox\")\n\t\t\t{\n\t\t\t\tlet add = otherSettings.createComponent(\"Button\");\n\t\t\t\tadd.setStyle(\"plus-button\");\n\t\t\t\tadd.onDown(function(){\n\t\t\t\t\tlet object = options.createComponent(\"SingleLineTextBox\");\n\t\t\t\t\tobject.build(\n\t\t\t\t\t{\n\t\t\t\t\t\t'options': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\totherSettings.addObjectsGroup({\n\t\t\t\tquestions: [{\n\t\t\t\t\tID: \"notAcceptUnanswered\",\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue:BX.message(\"NOT_ACCEPT_UNANSWERED\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},],\n\t\t\t},);\n\t\t}\n\n\t\tlet saveButton = otherSettings.createComponent(\"Button\");\n\t\tsaveButton.build(\n\t\t\t{\n\t\t\t\t'options': [\n\t\t\t\t\t{\n\n\t\t\t\t\t\tvalue:BX.message(\"SAVE_FORM\"),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\tlet editor = this;\n\t\tsaveButton.onDown(function(){\n\t\t\teditor.applyChanges(component,undefined,options);\n\t\t});\n\t\t//otherSettings.addObjectsGroup();\n\n\t\t/*let configGallery = {\n\t\t\t\"galleryClassCSS\": \"editor-gallery\",\n\t\t};\n\t\tlet gallery = new ComponentsGallery(configGallery);\n\t\tgallery.addObjectsGroup({\n\t\t\tID: 6829,\n\t\t\tquestions: [\n\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tvalue: 'Редактирование поля',\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Текст вопроса:',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Подсказка к вопросу',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t\tvalue: \"НЕ принимать без ответа\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\n\t\tlet gallery2 = new ComponentsGallery(configGallery);\n\t\tgallery2.addObjectsGroup({\n\t\t\tID: 6829,\n\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tvalue: 'Редактирование поля',\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Текст вопроса:',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Подсказка к вопросу',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t\tvalue: \"НЕ принимать без ответа\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\n\n\t*/\n\t}\n\n\taddComponent(type)\n\t{\n\t\tthis.runEditor(this.objectsGallery.createComponent(type),false);\n\t\tthis.selectingAComponentMenu.remove();\n\t}\n}"],"names":["TypeButton","type","parent","setRootNode","Tag","render","typesIcon","BX","message","typesDescription","getHTMLObject","onclick","addComponent","ObjectGUI","ComponentEditor","IDManager","objectsGallery","window","Savmaxru","ModalWindow","append","openWindow","selectingAComponent","i","types","length","button","setContent","selectingAComponentMenu","optionStructure","option","index","ID","options","value","component","description","optionsGallery","otherSettings","objects","getObjects","object","newValue","getHTMLValue","modifiableOption","getProperty","undefined","savedValue","remove","rewriteProperty","refreshHTML","addOptions","runWindow","componentStructure","getStructure","configDescription","ComponentsGallery","configOption","enableEditMode","configOtherSettings","titles","addObjectsGroup","questions","comment","optionsStructure","getOptions","createComponent","addProperty","build","add","setStyle","onDown","saveButton","editor","applyChanges","runEditor"],"mappings":"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"}