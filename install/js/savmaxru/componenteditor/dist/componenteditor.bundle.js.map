{"version":3,"file":"componenteditor.bundle.js","sources":["../src/typebutton.js","../src/componenteditor.js"],"sourcesContent":["import {Tag} from 'main.core';\nimport {ObjectGUI} from 'savmaxru.objectgui';\n\nexport class TypeButton extends ObjectGUI\n{\n\ttypesDescription = {\n\t\t\"DropDownList\": \"DROPDOWN_LIST\",\n\t\t\"CheckboxList\": \"CHECKBOX_LIST\",\n\t\t\"RadiobuttonList\" : \"RADIOBUTTON_LIST\",\n\t\t\"Heading\" : \"HEADING\",\n\t\t\"SingleLineTextBox\" : \"SINGLELINE_TEXTBOX\",\n\t\t\"MultiLineTextBox\" : \"MULTILINE_TEXTBOX\",\n\t};\n\n\ttypesIcon = {\n\t\t\"DropDownList\": \"dropdownlist-ico\",\n\t\t\"CheckboxList\": \"checkboxlist-ico\",\n\t\t\"RadiobuttonList\" : \"radiobuttonlist-ico\",\n\t\t\"Heading\" : \"heading-ico\",\n\t\t\"SingleLineTextBox\" : \"singlelinetextbox-ico\",\n\t\t\"MultiLineTextBox\" : \"multilinetextbox-ico\",\n\t};\n\n\tconstructor(type, parent)\n\t{\n\t\tsuper();\n\n\t\tthis.setRootNode(\n\t\t\tTag.render`\n\t\t\t<div class=\"btn-type-ico\">\n\t\t\t\t<div class=\"${this.typesIcon[type]}\"></div>\n\t\t\t\t<span>${BX.message(this.typesDescription[type])}</span>\n\t\t\t</div>`\n\t\t);\n\t\t(this.getHTMLObject()).onclick = function(_this) {\n\t\t\tparent.addComponent(type);\n\t\t};\n\t}\n}\n\n//alert(BX.message(\"VENDOR_MODULENAME_COMPONENTNAME_BOOK_TITLE_1\"));\n//alert(BX.message(\"UI_BUTTONS_SAVE_BTN_TEXT\"));\n//alert(3);","import {Type} from 'main.core';\nimport {ModalWindow} from 'savmaxru.modalwindow';\nimport {Tag} from 'main.core';\nimport './css/style.css'\nimport {TypeButton} from \"./typebutton\";\nimport {ComponentsGallery} from \"savmaxru.componentsgallery\";\nimport {IDManager} from 'savmaxru.idmanager';\n\nexport class ComponentEditor\n{\n\tIDManager = new IDManager('editor');\n\n\ttypes = [\n\t\t\"DropDownList\",\"CheckboxList\",\"RadiobuttonList\", \"Heading\" , \"SingleLineTextBox\", \"MultiLineTextBox\",\n\t];\n\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tsetGallery(objectsGallery)\n\t{\n\t\tthis.objectsGallery = objectsGallery;\n\t}\n\n\topenWindow()\n\t{\n\t\tthis.window = new Savmaxru.ModalWindow();\n\t\tthis.parent.append(this.window.getHTMLObject());\n\t}\n\n\tcreate()\n\t{\n\t\tthis.openWindow();\n\t\tlet selectingAComponent = Tag.render`<div class=\"components-selection\"></div>`;\n\n\t\tfor(let i=0; i<this.types.length; i++)\n\t\t{\n\t\t\tlet button = new TypeButton(this.types[i],this);\n\t\t\tselectingAComponent.append(button.getHTMLObject());\n\t\t}\n\t\tthis.window.setContent(selectingAComponent);\n\t\tthis.selectingAComponentMenu = selectingAComponent;\n\t}\n\n\n\trunEditor(component)\n\t{\n\t\tthis.openWindow();\n\t\tlet componentStructure = component.getStructure()\n\n\t\tlet configDescription = {\n\t\t\t\"galleryClassCSS\": \"editor-description-gallery\",\n\t\t};\n\t\tlet description = new ComponentsGallery(configDescription);\n\t\tthis.window.setContent(description.getHTMLObject());\n\n\t\tlet configOption = {\n\t\t\t\"galleryClassCSS\": \"editor-option-gallery\",\n\t\t};\n\t\tlet options = new ComponentsGallery(configOption);\n\t\tthis.window.setContent(options.getHTMLObject());\n\n\t\tlet configOtherSettings = {\n\t\t\t\"galleryClassCSS\": \"editor-other-settings-gallery\",\n\t\t};\n\t\tlet otherSettings = new ComponentsGallery(configOtherSettings);\n\t\tthis.window.setContent(otherSettings.getHTMLObject());\n\n\t\tlet type = componentStructure[\"type\"];\n\n\t\tif(type === \"Heading\")\n\t\t{\n\t\t\tdescription.addObjectsGroup({\n\t\t\t\tquestions: [{\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},{\n\t\t\t\t\tID: \"headingText\",\n\t\t\t\t\tdescription:BX.message(\"HEADING_TEXT\"),\n\t\t\t\t\ttype: \"SingleLineTextBox\",\n\t\t\t\t},],\n\t\t\t},);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdescription.addObjectsGroup({\n\t\t\t\tquestions: [{\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: BX.message(\"HEADER_EDITING_TITLE\"),\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},{\n\t\t\t\t\tID: \"questionText\",\n\t\t\t\t\tdescription:BX.message(\"QUESTION_TEXT\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t},{\n\t\t\t\t\tID: \"hintToTheQuestion\",\n\t\t\t\t\tdescription:BX.message(\"HINT_TO_THE_QUESTION\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t},],\n\t\t\t},);\n\t\t}\n\n\t\totherSettings.addObjectsGroup({\n\t\t\tquestions: [{\n\t\t\t\tID: \"notAcceptUnanswered\",\n\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue:BX.message(\"NOT_ACCEPT_UNANSWERED\"),\n\t\t\t\t\t},\n\t\t\t\t],\n\n\t\t\t},],\n\t\t},);\n\n\t\tlet saveButton = otherSettings.createFactoryObject(\"Button\");\n\t\tsaveButton.build(\n\t\t\t{\n\t\t\t\t'ID': 2226,\n\t\t\t\t'index': 6,\n\t\t\t\t'options': [\n\t\t\t\t\t{\n\t\t\t\t\t\tindex: 0,\n\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\tvalue:BX.message(\"SAVE_FORM\"),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t//otherSettings.addObjectsGroup();\n\n\t\t/*let configGallery = {\n\t\t\t\"galleryClassCSS\": \"editor-gallery\",\n\t\t};\n\t\tlet gallery = new ComponentsGallery(configGallery);\n\t\tgallery.addObjectsGroup({\n\t\t\tID: 6829,\n\t\t\tquestions: [\n\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tvalue: 'Редактирование поля',\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Текст вопроса:',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Подсказка к вопросу',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t\tvalue: \"НЕ принимать без ответа\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\n\t\tlet gallery2 = new ComponentsGallery(configGallery);\n\t\tgallery2.addObjectsGroup({\n\t\t\tID: 6829,\n\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tvalue: 'Редактирование поля',\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Текст вопроса:',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tdescription:'Подсказка к вопросу',\n\t\t\t\t\tindex: 4,\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tID: 121212,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'IDManager': this.IDManager,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\t\tID: 121212,\n\t\t\t\t\t\t\tvalue: \"НЕ принимать без ответа\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\n\n\t*/\n\t}\n\n\n\taddComponent(name)\n\t{\n\t\tthis.objectsGallery.createFactoryObject(name);\n\t\tthis.selectingAComponentMenu.remove();\n\t}\n}"],"names":["TypeButton","type","parent","setRootNode","Tag","render","typesIcon","BX","message","typesDescription","getHTMLObject","onclick","_this","addComponent","ObjectGUI","ComponentEditor","IDManager","objectsGallery","window","Savmaxru","ModalWindow","append","openWindow","selectingAComponent","i","types","length","button","setContent","selectingAComponentMenu","component","componentStructure","getStructure","configDescription","description","ComponentsGallery","configOption","options","configOtherSettings","otherSettings","addObjectsGroup","questions","value","ID","saveButton","createFactoryObject","build","index","name","remove"],"mappings":"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"}