{"version":3,"file":"componenteditor.bundle.js","sources":["../src/typebutton.js","../src/componenteditor.js"],"sourcesContent":["import {Tag} from 'main.core';\nimport {ObjectGUI} from 'savmaxru.objectgui';\n\nexport class TypeButton extends ObjectGUI\n{\n\ttypesDescription = {\n\t\t\"DropDownList\": \"DROPDOWN_LIST\",\n\t\t\"CheckboxList\": \"CHECKBOX_LIST\",\n\t\t\"RadiobuttonList\" : \"RADIOBUTTON_LIST\",\n\t\t\"Heading\" : \"HEADING\",\n\t\t\"SingleLineTextBox\" : \"SINGLELINE_TEXTBOX\",\n\t\t\"MultiLineTextBox\" : \"MULTILINE_TEXTBOX\",\n\t};\n\n\ttypesIcon = {\n\t\t\"DropDownList\": \"dropdownlist-ico\",\n\t\t\"CheckboxList\": \"checkboxlist-ico\",\n\t\t\"RadiobuttonList\" : \"radiobuttonlist-ico\",\n\t\t\"Heading\" : \"heading-ico\",\n\t\t\"SingleLineTextBox\" : \"singlelinetextbox-ico\",\n\t\t\"MultiLineTextBox\" : \"multilinetextbox-ico\",\n\t};\n\n\tconstructor(type, parent)\n\t{\n\t\tsuper();\n\t\tthis.setRootNode(\n\t\t\tTag.render`\n\t\t\t<div class=\"btn-type-ico\">\n\t\t\t\t<div class=\"${this.typesIcon[type]}\"></div>\n\t\t\t\t<span>${BX.message(this.typesDescription[type])}</span>\n\t\t\t</div>`\n\t\t);\n\t\t(this.getHTMLObject()).onclick = function() {\n\t\t\tparent.addComponent(type);\n\t\t};\n\t}\n}\n\n//alert(BX.message(\"VENDOR_MODULENAME_COMPONENTNAME_BOOK_TITLE_1\"));\n//alert(BX.message(\"UI_BUTTONS_SAVE_BTN_TEXT\"));\n//alert(3);","import {ModalWindow} from 'savmaxru.modalwindow';\nimport {Tag} from 'main.core';\nimport './css/style.css'\nimport {TypeButton} from \"./typebutton\";\nimport {ComponentsGallery} from \"savmaxru.componentsgallery\";\nimport {IDManager} from 'savmaxru.idmanager';\n\nexport class ComponentEditor\n{\n\tIDManager = new IDManager('editor');\n\n\ttypes = [\n\t\t\"DropDownList\",\"CheckboxList\",\"RadiobuttonList\", \"Heading\" , \"SingleLineTextBox\", \"MultiLineTextBox\",\n\t];\n\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tsetGallery(objectsGallery)\n\t{\n\t\tthis.objectsGallery = objectsGallery;\n\t}\n\n\topenWindow()\n\t{\n\t\tthis.window = new ModalWindow();\n\t\tthis.parent.append(this.window.getHTMLObject());\n\t}\n\n\tcloseWindow()\n\t{\n\t\tthis.window.close();\n\t}\n\n\trunCreator()\n\t{\n\t\tthis.openWindow();\n\t\tlet selectingAComponent = Tag.render`<div class=\"components-selection\"></div>`;\n\t\tfor(let i=0; i<this.types.length; i++)\n\t\t{\n\t\t\tlet button = new TypeButton(this.types[i],this);\n\t\t\tselectingAComponent.append(button.getHTMLObject());\n\t\t}\n\t\tthis.window.setContent(selectingAComponent);\n\t\tthis.selectingAComponentMenu = selectingAComponent;\n\t}\n\n\tbuildFieldStructureForEditingOption(optionStructure)\n\t{\n\t\tlet option = {\n\t\t\tindex: optionStructure[\"index\"],\n\t\t\tID: optionStructure[\"ID\"],\n\t\t\ttype: \"SingleLineTextBox\",\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tvalue: optionStructure[\"value\"],\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t\treturn option;\n\t}\n\n\tapplyChanges(component,description,optionsGallery,otherSettings)\n\t{\n\t\tlet objects = optionsGallery.getObjects();\n\t\tfor(let i=0; i<objects.length; i++)\n\t\t{\n\t\t\tlet object = objects[i];\n\n\t\t\tlet newValue = object.getValue();\n\t\t\tlet modifiableOption = object.getProperty('modifiableOption');\n\n\t\t\tif(modifiableOption !== undefined)\n\t\t\t{\n\t\t\t\tlet savedValue = modifiableOption.getProperty('value');\n\t\t\t\tif(object.getProperty('change') === 'removed')\n\t\t\t\t{\n\t\t\t\t\tmodifiableOption.remove();\n\t\t\t\t}\n\t\t\t\telse if(newValue !== savedValue)\n\t\t\t\t{\n\t\t\t\t\tmodifiableOption.rewriteProperty('value', newValue);\n\t\t\t\t\tmodifiableOption.refreshHTML();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(object.getProperty('change') !== 'removed')\n\t\t\t{\n\t\t\t\t//если был создана новая опция и не была удалена при том\n\t\t\t\tcomponent.addOptions([{\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t}],'create');\n\t\t\t}\n\t\t}\n\n\t\tlet descriptionOptions = description.getResult()['questions'];\n\n\t\tif( descriptionOptions.length !== 0 )\n\t\t{\n\t\t\tlet newQuestionText = descriptionOptions[0]['options']['userValue'];\n\t\t\tlet commentToTheQuestion = descriptionOptions[1]['options']['userValue'];\n\t\t\tcomponent.rewriteProperty('comment', commentToTheQuestion);\n\t\t\tcomponent.rewriteProperty('description', newQuestionText);\n\t\t\tcomponent.setComment(commentToTheQuestion);\n\t\t\tcomponent.setDescription(newQuestionText);\n\t\t}\n\t}\n\n\trunEditor(component,runWindow = true)\n\t{\n\t\tif(runWindow)\n\t\t{\n\t\t\tthis.openWindow();\n\t\t}\n\t\tlet componentStructure = component.getStructure();\n\n\t\tlet configDescription = {\n\t\t\t\"galleryClassCSS\": \"editor-description-gallery\",\n\t\t};\n\t\tlet description = new ComponentsGallery(configDescription,this,this.IDManager);\n\t\tthis.window.setContent(description.getHTMLObject());\n\n\t\tlet configOption = {\n\t\t\t\"galleryClassCSS\": \"editor-options-gallery\",\n\t\t};\n\t\tlet options = new ComponentsGallery(configOption,this,this.IDManager);\n\t\tthis.window.setContent(options.getHTMLObject());\n\n\t\tlet configOtherSettings = {\n\t\t\t\"galleryClassCSS\": \"editor-other-settings-gallery\",\n\t\t};\n\t\tlet otherSettings = new ComponentsGallery(configOtherSettings,this,this.IDManager);\n\t\tthis.window.setContent(otherSettings.getHTMLObject());\n\n\t\tlet type = componentStructure[\"type\"];\n\n\t\tlet titles = {\n\t\t\t\"Heading\" :BX.message(\"HEADER_EDITING_TITLE\"),\n\t\t\t\"RadiobuttonList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"CheckboxList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"MultiLineTextBox\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"SingleLineTextBox\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"DropDownList\" :BX.message(\"QUESTION_EDITING_TITLE\"),\n\t\t\t\"Button\" : BX.message(\"BUTTON_EDITING_TITLE\"),\n\t\t}\n\n\t\tdescription.addObjectsGroup({\n\n\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\ttype: \"Heading\",\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue:titles[type],\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t}\n\t\t\t],\n\t\t});\n\n\t\tif(type !== \"Button\" && type !== \"Heading\")\n\t\t{\n\n\t\t\tdescription.addObjectsGroup({\n\t\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\t\tID: \"questionText\",\n\t\t\t\t\tdescription:BX.message(\"QUESTION_TEXT\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions:[{\n\t\t\t\t\t\tvalue: component.getProperty('description'),\n\t\t\t\t\t}],\n\t\t\t\t},{\n\t\t\t\t\tID: \"hintToTheQuestion\",\n\t\t\t\t\tdescription:BX.message(\"HINT_TO_THE_QUESTION\"),\n\t\t\t\t\ttype: \"MultiLineTextBox\",\n\t\t\t\t\toptions:[{\n\t\t\t\t\t\tvalue: component.getProperty('comment'),\n\t\t\t\t\t}],\n\t\t\t\t},],\n\t\t\t},);\n\n\t\t\tif(type === \"CheckboxList\" || type === \"RadiobuttonList\" || type === \"DropDownList\")\n\t\t\t{\n\t\t\t\tdescription.addObjectsGroup({\n\t\t\t\t\tquestions: [{\n\t\t\t\t\t\ttype: \"Heading\",\n\t\t\t\t\t\tcomment: BX.message(\"ANSWER_OPTIONS_COMMENT\"),\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue:BX.message(\"ANSWER_OPTIONS\"),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif(type === \"DropDownList\" || type === \"CheckboxList\" || type === \"RadiobuttonList\")\n\t\t{\n\t\t\toptions.enableEditMode({\n\t\t\t\t\"remove\":true\n\t\t\t});\n\n\t\t}\n\n\t\tlet optionsStructure = component.getOptions();\n\n\t\tfor(let i=0; i<optionsStructure.length; i++)\n\t\t{\n\t\t\tif(optionsStructure[i].getProperty('change') !== 'removed')\n\t\t\t{\n\t\t\t\tlet option = options.createComponent(\"SingleLineTextBox\");\n\t\t\t\toption.addProperty('modifiableOption',optionsStructure[i]);\n\t\t\t\toption.build(\n\t\t\t\t{\n\t\t\t\t\t'options': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: optionsStructure[i].getProperty('value'),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif(type !== \"Button\" && type !== \"Heading\")\n\t\t{\n\t\t\tif(type !== \"SingleLineTextBox\" && type !== \"MultiLineTextBox\")\n\t\t\t{\n\t\t\t\tlet add = otherSettings.createComponent(\"Button\");\n\t\t\t\tadd.setStyle(\"plus-button\");\n\t\t\t\tadd.onDown(function(){\n\t\t\t\t\tlet object = options.createComponentWithOption(\"SingleLineTextBox\");\n\t\t\t\t});\n\t\t\t}\n\t\t\totherSettings.addObjectsGroup({\n\t\t\t\tquestions: [{\n\t\t\t\t\tID: \"notAcceptUnanswered\",\n\t\t\t\t\ttype: \"CheckboxList\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue:BX.message(\"NOT_ACCEPT_UNANSWERED\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t},],\n\t\t\t},);\n\t\t}\n\n\t\tlet saveButton = otherSettings.createComponent(\"Button\");\n\t\tsaveButton.build(\n\t\t\t{\n\t\t\t\t'options': [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue:BX.message(\"SAVE_FORM\"),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\tlet editor = this;\n\t\tsaveButton.onDown(function(){\n\t\t\t//options.getHTMLObject().blur();\n\t\t\teditor.applyChanges(component,description,options);\n\t\t\teditor.closeWindow()\n\t\t});\n\t}\n\n\taddComponent(type)\n\t{\n\t\tthis.selectingAComponentMenu.remove();\n\t\tlet newComponent = this.objectsGallery.createComponent(type);\n\t\tnewComponent.build({\n\t\t\tdescription: '',\n\t\t\tcomment: '',\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tvalue: '',\n\t\t\t\t},\n\t\t\t],\n\t\t})\n\t\tthis.runEditor(newComponent,false);\n\t}\n}"],"names":["TypeButton","type","parent","setRootNode","Tag","render","typesIcon","BX","message","typesDescription","getHTMLObject","onclick","addComponent","ObjectGUI","ComponentEditor","IDManager","objectsGallery","window","ModalWindow","append","close","openWindow","selectingAComponent","i","types","length","button","setContent","selectingAComponentMenu","optionStructure","option","index","ID","options","value","component","description","optionsGallery","otherSettings","objects","getObjects","object","newValue","getValue","modifiableOption","getProperty","undefined","savedValue","remove","rewriteProperty","refreshHTML","addOptions","descriptionOptions","getResult","newQuestionText","commentToTheQuestion","setComment","setDescription","runWindow","componentStructure","getStructure","configDescription","ComponentsGallery","configOption","configOtherSettings","titles","addObjectsGroup","questions","comment","enableEditMode","optionsStructure","getOptions","createComponent","addProperty","build","add","setStyle","onDown","createComponentWithOption","saveButton","editor","applyChanges","closeWindow","newComponent","runEditor"],"mappings":"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"}