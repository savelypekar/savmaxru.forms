{"version":3,"file":"editor.bundle.js","sources":["../src/editor.js"],"sourcesContent":["import {ObjectGUI} from \"savmaxru.objectgui\";\nimport {Tag} from 'main.core';\nimport './css/style.css'\nimport {ComponentEditor} from \"savmaxru.componenteditor\";\nimport {ComponentsGallery} from \"savmaxru.componentsgallery\";\nimport {GUIComponents} from \"savmaxru.guicomponents\";\n\nexport class Editor extends ObjectGUI\n{\n\tconstructor(ID)\n\t{\n\t\tsuper();\n\t\tthis.setRootNode(\n\t\t\tTag.render`\n\t\t\t${this.addNode(\"editor-wrapper\")}`\n\t\t);\n\n\t\tthis.includeInNode(\"editor-wrapper\", Tag.render`\n\t\t<div class=\"navigation-bar\">\n\t\t\t<div class=\"a-wrapper\">\n\t\t\t\t<a href=\"/forms/result/${ID}\" target=\"_blank\">${BX.message(\"RESULT\")}</a>\n\t\t\t\t<a href=\"/forms/view/${ID}\" target=\"_blank\">${BX.message(\"FORM_PAGE\")}</a>\n\t\t\t</div><br>\n\t\t</div>\n\t\t`);\n\n\t\tlet configGallery = {\n\t\t\t\"galleryClassCSS\": \"editor-gallery\",\n\t\t\t\"componentEditor\": componentEditor,\n\t\t\t\"argumentsForResult\": {\n\t\t\t\t'ID': argumentID\n\t\t\t},\n\t\t};\n\t\tlet gallery = new ComponentsGallery(configGallery);\n\t\tgallery.enableEditMode();\n\t\tthis.includeInNode(\"editor-wrapper\", gallery.getHTMLObject());\n\n\t\tlet componentEditor = new ComponentEditor(this.getNode(\"editor-wrapper\"));\n\t\tcomponentEditor.setGallery(gallery);\n\n\t\tlet argumentID = ID;\n\t\tif(argumentID === 0)\n\t\t{\n\t\t\targumentID = \"NEW_FORM\";\n\t\t}\n\n\t\tlet addComponentButton = GUIComponents.attach(\"Button\");\n\t\taddComponentButton.setStyle('plus-button');\n\t\tthis.includeInNode(\"editor-wrapper\", addComponentButton.getHTMLObject());\n\n\t\tlet saveButton = GUIComponents.attach(\"Button\");\n\t\tsaveButton.build(\n\t\t\t{\n\t\t\t\t'options':[\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: BX.message(\"SAVE_FORM\"),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\tthis.includeInNode(\"editor-wrapper\", saveButton.getHTMLObject());\n\n\t\taddComponentButton.onDown(function(){\n\t\t\tcomponentEditor.runCreator();\n\t\t});\n\n\t}\n}"],"names":["Editor","ID","setRootNode","Tag","render","addNode","includeInNode","BX","message","configGallery","componentEditor","argumentID","gallery","ComponentsGallery","enableEditMode","getHTMLObject","ComponentEditor","getNode","setGallery","addComponentButton","GUIComponents","attach","setStyle","saveButton","build","value","onDown","runCreator","ObjectGUI"],"mappings":";;;;;;;;;;;;;;;;;;;;;;KAOaA,MAAb;CAAA;;CAEC,kBAAYC,EAAZ,EACA;CAAA;;CAAA;CACC;;CACA,UAAKC,WAAL,CACCC,aAAG,CAACC,MADL,oBAEG,MAAKC,OAAL,CAAa,gBAAb,CAFH;;CAKA,UAAKC,aAAL,CAAmB,gBAAnB,EAAqCH,aAAG,CAACC,MAAzC,qBAG2BH,EAH3B,EAGkDM,EAAE,CAACC,OAAH,CAAW,QAAX,CAHlD,EAIyBP,EAJzB,EAIgDM,EAAE,CAACC,OAAH,CAAW,WAAX,CAJhD;;CASA,QAAIC,aAAa,GAAG;CACnB,yBAAmB,gBADA;CAEnB,yBAAmBC,eAFA;CAGnB,4BAAsB;CACrB,cAAMC;CADe;CAHH,KAApB;CAOA,QAAIC,OAAO,GAAG,IAAIC,4CAAJ,CAAsBJ,aAAtB,CAAd;CACAG,IAAAA,OAAO,CAACE,cAAR;;CACA,UAAKR,aAAL,CAAmB,gBAAnB,EAAqCM,OAAO,CAACG,aAAR,EAArC;;CAEA,QAAIL,eAAe,GAAG,IAAIM,wCAAJ,CAAoB,MAAKC,OAAL,CAAa,gBAAb,CAApB,CAAtB;CACAP,IAAAA,eAAe,CAACQ,UAAhB,CAA2BN,OAA3B;CAEA,QAAID,UAAU,GAAGV,EAAjB;;CACA,QAAGU,UAAU,KAAK,CAAlB,EACA;CACCA,MAAAA,UAAU,GAAG,UAAb;CACA;;CAED,QAAIQ,kBAAkB,GAAGC,oCAAa,CAACC,MAAd,CAAqB,QAArB,CAAzB;CACAF,IAAAA,kBAAkB,CAACG,QAAnB,CAA4B,aAA5B;;CACA,UAAKhB,aAAL,CAAmB,gBAAnB,EAAqCa,kBAAkB,CAACJ,aAAnB,EAArC;;CAEA,QAAIQ,UAAU,GAAGH,oCAAa,CAACC,MAAd,CAAqB,QAArB,CAAjB;CACAE,IAAAA,UAAU,CAACC,KAAX,CACC;CACC,iBAAU,CACT;CACCC,QAAAA,KAAK,EAAElB,EAAE,CAACC,OAAH,CAAW,WAAX;CADR,OADS;CADX,KADD;;CAQA,UAAKF,aAAL,CAAmB,gBAAnB,EAAqCiB,UAAU,CAACR,aAAX,EAArC;;CAEAI,IAAAA,kBAAkB,CAACO,MAAnB,CAA0B,YAAU;CACnChB,MAAAA,eAAe,CAACiB,UAAhB;CACA,KAFD;CAnDD;CAuDC;;CA1DF;CAAA,EAA4BC,4BAA5B;;;;;;;;"}